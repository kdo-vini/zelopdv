import{s as Ja,n as Gt,r as Za,d as ia,o as Ka}from"../chunks/DUJQqtHE.js";import{S as Wa,i as Xa,d as u,x as Pe,y as oe,a as J,b as e,v as Qt,o as c,c as n,p as q,g as x,e as m,n as Aa,h as i,j as E,s as B,f as O,t as M,u as zt,w as sa}from"../chunks/CBbGAyDJ.js";import{e as Ot}from"../chunks/BMMEC0mH.js";import{s as qt}from"../chunks/BxpIoVra.js";import{e as $a}from"../chunks/GGIVe_N_.js";function Ba(l,t,a){const r=l.slice();return r[34]=t[a],r}function Ra(l,t,a){const r=l.slice();return r[37]=t[a],r}function Ha(l,t,a){const r=l.slice();return r[40]=t[a],r}function ja(l,t,a){const r=l.slice();return r[43]=t[a],r}function Ua(l){let t,a;return{c(){t=i("div"),a=M(l[16]),this.h()},l(r){t=n(r,"DIV",{class:!0});var v=m(t);a=O(v,l[16]),v.forEach(u),this.h()},h(){c(t,"class","mb-4 text-sm text-red-600")},m(r,v){J(r,t,v),e(t,a)},p(r,v){v[0]&65536&&B(a,r[16])},d(r){r&&u(t)}}}function Qa(l){let t,a,r=l[43].id+"",v,w,_=new Date(l[43].data_abertura).toLocaleString()+"",f,s,d=l[43].data_fechamento?`(fechado ${new Date(l[43].data_fechamento).toLocaleString()})`:"(aberto)",h,o,g;return{c(){t=i("option"),a=M("#"),v=M(r),w=M(" — "),f=M(_),s=E(),h=M(d),o=E(),this.h()},l(C){t=n(C,"OPTION",{});var p=m(t);a=O(p,"#"),v=O(p,r),w=O(p," — "),f=O(p,_),s=x(p),h=O(p,d),o=x(p),p.forEach(u),this.h()},h(){t.__value=g=l[43].id,zt(t,t.__value)},m(C,p){J(C,t,p),e(t,a),e(t,v),e(t,w),e(t,f),e(t,s),e(t,h),e(t,o)},p(C,p){p[0]&131072&&r!==(r=C[43].id+"")&&B(v,r),p[0]&131072&&_!==(_=new Date(C[43].data_abertura).toLocaleString()+"")&&B(f,_),p[0]&131072&&d!==(d=C[43].data_fechamento?`(fechado ${new Date(C[43].data_fechamento).toLocaleString()})`:"(aberto)")&&B(h,d),p[0]&131072&&g!==(g=C[43].id)&&(t.__value=g,zt(t,t.__value))},d(C){C&&u(t)}}}function tl(l){var ka;let t,a,r,v,w="Total de Vendas",_,f,s=l[22](l[8])+"",d,h,o,g,C="Qtd. de Vendas",p,T,H,F,y,S,k="Ticket Médio",Z,z,G=l[22](l[20])+"",et,Dt,P,W,R="Valor Inicial do Caixa",dt,at,K=l[22](((ka=l[0])==null?void 0:ka.valor_inicial)||0)+"",D,U,L,X,ot,b="Dinheiro",I,A,Y=l[22](l[14])+"",j,Q,$,tt,rt="Cartão",st,nt,ft=l[22](l[10])+"",Yt,Zt,ht,Ae,re=l[22](l[13])+"",_e,Be,se=l[22](l[12])+"",ve,ne=l[11]>0?` · Outros ${l[22](l[11])}`:"",fe,Re,Vt,Mt,da="Pix",He,Jt,ie=l[22](l[9])+"",he,je,mt,wt,Ft,ca="Sangria",Ue,Kt,de=l[22](l[6])+"",me,Qe,Tt,Pt,ua="Suprimento",ze,Wt,ce=l[22](l[5])+"",pe,Ge,kt,At,_a="Saldo Esperado em Gaveta",Ye,Xt,ue=l[22](l[19])+"",be,Ze,pt,Bt,va="Top Produtos",Je,It,yt,Rt,fa="Ordenar por",Ke,lt,bt,ha="Receita",gt,ma="Quantidade",Ct,pa="Produto",We,Nt,Ht,ba="Direção",Xe,it,xt,ga="Maior → menor / Z → A",Et,Ca="Menor → maior / A → Z",$e,ta,St,jt,xa="Vendas do Caixa",ea,aa,Lt,Ut,Ea="Movimentações do Caixa",la,oa,Da;function Va(V,N){return V[21].length===0?ol:ll}let ge=Va(l),ct=ge(l);function wa(V,N){return V[1].length===0?sl:rl}let Ce=wa(l),ut=Ce(l);function Ta(V,N){return V[2].length===0?il:nl}let xe=Ta(l),_t=xe(l);return{c(){t=i("section"),a=i("div"),r=i("div"),v=i("div"),v.textContent=w,_=E(),f=i("div"),d=M(s),h=E(),o=i("div"),g=i("div"),g.textContent=C,p=E(),T=i("div"),H=M(l[7]),F=E(),y=i("div"),S=i("div"),S.textContent=k,Z=E(),z=i("div"),et=M(G),Dt=E(),P=i("div"),W=i("div"),W.textContent=R,dt=E(),at=i("div"),D=M(K),U=E(),L=i("div"),X=i("div"),ot=i("div"),ot.textContent=b,I=E(),A=i("div"),j=M(Y),Q=E(),$=i("div"),tt=i("div"),tt.textContent=rt,st=E(),nt=i("div"),Yt=M(ft),Zt=E(),ht=i("div"),Ae=M("Débito "),_e=M(re),Be=M(" · Crédito "),ve=M(se),fe=M(ne),Re=E(),Vt=i("div"),Mt=i("div"),Mt.textContent=da,He=E(),Jt=i("div"),he=M(ie),je=E(),mt=i("div"),wt=i("div"),Ft=i("div"),Ft.textContent=ca,Ue=E(),Kt=i("div"),me=M(de),Qe=E(),Tt=i("div"),Pt=i("div"),Pt.textContent=ua,ze=E(),Wt=i("div"),pe=M(ce),Ge=E(),kt=i("div"),At=i("div"),At.textContent=_a,Ye=E(),Xt=i("div"),be=M(ue),Ze=E(),pt=i("div"),Bt=i("h2"),Bt.textContent=va,Je=E(),It=i("div"),yt=i("div"),Rt=i("label"),Rt.textContent=fa,Ke=E(),lt=i("select"),bt=i("option"),bt.textContent=ha,gt=i("option"),gt.textContent=ma,Ct=i("option"),Ct.textContent=pa,We=E(),Nt=i("div"),Ht=i("label"),Ht.textContent=ba,Xe=E(),it=i("select"),xt=i("option"),xt.textContent=ga,Et=i("option"),Et.textContent=Ca,$e=E(),ct.c(),ta=E(),St=i("div"),jt=i("h2"),jt.textContent=xa,ea=E(),ut.c(),aa=E(),Lt=i("div"),Ut=i("h2"),Ut.textContent=Ea,la=E(),_t.c(),this.h()},l(V){t=n(V,"SECTION",{class:!0});var N=m(t);a=n(N,"DIV",{class:!0});var vt=m(a);r=n(vt,"DIV",{class:!0});var Ee=m(r);v=n(Ee,"DIV",{class:!0,"data-svelte-h":!0}),q(v)!=="svelte-1kfwvb9"&&(v.textContent=w),_=x(Ee),f=n(Ee,"DIV",{class:!0});var Ia=m(f);d=O(Ia,s),Ia.forEach(u),Ee.forEach(u),h=x(vt),o=n(vt,"DIV",{class:!0});var De=m(o);g=n(De,"DIV",{class:!0,"data-svelte-h":!0}),q(g)!=="svelte-1tjecem"&&(g.textContent=C),p=x(De),T=n(De,"DIV",{class:!0});var ya=m(T);H=O(ya,l[7]),ya.forEach(u),De.forEach(u),F=x(vt),y=n(vt,"DIV",{class:!0});var Ve=m(y);S=n(Ve,"DIV",{class:!0,"data-svelte-h":!0}),q(S)!=="svelte-l75agd"&&(S.textContent=k),Z=x(Ve),z=n(Ve,"DIV",{class:!0});var Na=m(z);et=O(Na,G),Na.forEach(u),Ve.forEach(u),Dt=x(vt),P=n(vt,"DIV",{class:!0});var we=m(P);W=n(we,"DIV",{class:!0,"data-svelte-h":!0}),q(W)!=="svelte-i9r73h"&&(W.textContent=R),dt=x(we),at=n(we,"DIV",{class:!0});var Sa=m(at);D=O(Sa,K),Sa.forEach(u),we.forEach(u),vt.forEach(u),U=x(N),L=n(N,"DIV",{class:!0});var $t=m(L);X=n($t,"DIV",{class:!0});var Te=m(X);ot=n(Te,"DIV",{class:!0,"data-svelte-h":!0}),q(ot)!=="svelte-xhro2f"&&(ot.textContent=b),I=x(Te),A=n(Te,"DIV",{class:!0});var La=m(A);j=O(La,Y),La.forEach(u),Te.forEach(u),Q=x($t),$=n($t,"DIV",{class:!0});var te=m($);tt=n(te,"DIV",{class:!0,"data-svelte-h":!0}),q(tt)!=="svelte-1fitdcb"&&(tt.textContent=rt),st=x(te),nt=n(te,"DIV",{class:!0});var qa=m(nt);Yt=O(qa,ft),qa.forEach(u),Zt=x(te),ht=n(te,"DIV",{class:!0});var ee=m(ht);Ae=O(ee,"Débito "),_e=O(ee,re),Be=O(ee," · Crédito "),ve=O(ee,se),fe=O(ee,ne),ee.forEach(u),te.forEach(u),Re=x($t),Vt=n($t,"DIV",{class:!0});var ke=m(Vt);Mt=n(ke,"DIV",{class:!0,"data-svelte-h":!0}),q(Mt)!=="svelte-w5fx2e"&&(Mt.textContent=da),He=x(ke),Jt=n(ke,"DIV",{class:!0});var Oa=m(Jt);he=O(Oa,ie),Oa.forEach(u),ke.forEach(u),$t.forEach(u),je=x(N),mt=n(N,"DIV",{class:!0});var ae=m(mt);wt=n(ae,"DIV",{class:!0});var Ie=m(wt);Ft=n(Ie,"DIV",{class:!0,"data-svelte-h":!0}),q(Ft)!=="svelte-czkypq"&&(Ft.textContent=ca),Ue=x(Ie),Kt=n(Ie,"DIV",{class:!0});var Ma=m(Kt);me=O(Ma,de),Ma.forEach(u),Ie.forEach(u),Qe=x(ae),Tt=n(ae,"DIV",{class:!0});var ye=m(Tt);Pt=n(ye,"DIV",{class:!0,"data-svelte-h":!0}),q(Pt)!=="svelte-idxlid"&&(Pt.textContent=ua),ze=x(ye),Wt=n(ye,"DIV",{class:!0});var Fa=m(Wt);pe=O(Fa,ce),Fa.forEach(u),ye.forEach(u),Ge=x(ae),kt=n(ae,"DIV",{class:!0});var Ne=m(kt);At=n(Ne,"DIV",{class:!0,"data-svelte-h":!0}),q(At)!=="svelte-mu7p5n"&&(At.textContent=_a),Ye=x(Ne),Xt=n(Ne,"DIV",{class:!0});var Pa=m(Xt);be=O(Pa,ue),Pa.forEach(u),Ne.forEach(u),ae.forEach(u),Ze=x(N),pt=n(N,"DIV",{});var le=m(pt);Bt=n(le,"H2",{class:!0,"data-svelte-h":!0}),q(Bt)!=="svelte-1u6plg1"&&(Bt.textContent=va),Je=x(le),It=n(le,"DIV",{class:!0});var Se=m(It);yt=n(Se,"DIV",{class:!0});var Le=m(yt);Rt=n(Le,"LABEL",{for:!0,"data-svelte-h":!0}),q(Rt)!=="svelte-1l3auq6"&&(Rt.textContent=fa),Ke=x(Le),lt=n(Le,"SELECT",{id:!0,class:!0});var qe=m(lt);bt=n(qe,"OPTION",{"data-svelte-h":!0}),q(bt)!=="svelte-11q23no"&&(bt.textContent=ha),gt=n(qe,"OPTION",{"data-svelte-h":!0}),q(gt)!=="svelte-3ys5ue"&&(gt.textContent=ma),Ct=n(qe,"OPTION",{"data-svelte-h":!0}),q(Ct)!=="svelte-pw4myf"&&(Ct.textContent=pa),qe.forEach(u),Le.forEach(u),We=x(Se),Nt=n(Se,"DIV",{class:!0});var Oe=m(Nt);Ht=n(Oe,"LABEL",{for:!0,"data-svelte-h":!0}),q(Ht)!=="svelte-vf5384"&&(Ht.textContent=ba),Xe=x(Oe),it=n(Oe,"SELECT",{id:!0,class:!0});var ra=m(it);xt=n(ra,"OPTION",{"data-svelte-h":!0}),q(xt)!=="svelte-1x5o9ya"&&(xt.textContent=ga),Et=n(ra,"OPTION",{"data-svelte-h":!0}),q(Et)!=="svelte-1sp5ea4"&&(Et.textContent=Ca),ra.forEach(u),Oe.forEach(u),Se.forEach(u),$e=x(le),ct.l(le),le.forEach(u),ta=x(N),St=n(N,"DIV",{});var Me=m(St);jt=n(Me,"H2",{class:!0,"data-svelte-h":!0}),q(jt)!=="svelte-1whb0ro"&&(jt.textContent=xa),ea=x(Me),ut.l(Me),Me.forEach(u),aa=x(N),Lt=n(N,"DIV",{});var Fe=m(Lt);Ut=n(Fe,"H2",{class:!0,"data-svelte-h":!0}),q(Ut)!=="svelte-sm3lx3"&&(Ut.textContent=Ea),la=x(Fe),_t.l(Fe),Fe.forEach(u),N.forEach(u),this.h()},h(){c(v,"class","text-xs text-slate-500"),c(f,"class","text-xl font-semibold"),c(r,"class","p-3 rounded border"),c(g,"class","text-xs text-slate-500"),c(T,"class","text-xl font-semibold"),c(o,"class","p-3 rounded border"),c(S,"class","text-xs text-slate-500"),c(z,"class","text-xl font-semibold"),c(y,"class","p-3 rounded border"),c(W,"class","text-xs text-slate-500"),c(at,"class","text-xl font-semibold"),c(P,"class","p-3 rounded border"),c(a,"class","grid sm:grid-cols-2 lg:grid-cols-4 gap-4"),c(ot,"class","text-xs text-slate-500"),c(A,"class","text-lg font-semibold"),c(X,"class","p-3 rounded border"),c(tt,"class","text-xs text-slate-500"),c(nt,"class","text-lg font-semibold"),c(ht,"class","text-xs text-slate-500 mt-1"),c($,"class","p-3 rounded border"),c(Mt,"class","text-xs text-slate-500"),c(Jt,"class","text-lg font-semibold"),c(Vt,"class","p-3 rounded border"),c(L,"class","grid sm:grid-cols-3 gap-4"),c(Ft,"class","text-xs text-slate-500"),c(Kt,"class","text-lg font-semibold text-amber-700"),c(wt,"class","p-3 rounded border"),c(Pt,"class","text-xs text-slate-500"),c(Wt,"class","text-lg font-semibold text-green-700"),c(Tt,"class","p-3 rounded border"),c(At,"class","text-xs text-slate-500"),c(Xt,"class","text-lg font-semibold"),c(kt,"class","p-3 rounded border"),c(mt,"class","grid sm:grid-cols-3 gap-4"),c(Bt,"class","font-semibold mb-2"),c(Rt,"for","top-order"),bt.__value="receita",zt(bt,bt.__value),gt.__value="quantidade",zt(gt,gt.__value),Ct.__value="alfabetica",zt(Ct,Ct.__value),c(lt,"id","top-order"),c(lt,"class","input-form max-w-52"),l[3]===void 0&&ia(()=>l[31].call(lt)),c(yt,"class","flex items-center gap-2"),c(Ht,"for","top-dir"),xt.__value="desc",zt(xt,xt.__value),Et.__value="asc",zt(Et,Et.__value),c(it,"id","top-dir"),c(it,"class","input-form max-w-40"),l[4]===void 0&&ia(()=>l[32].call(it)),c(Nt,"class","flex items-center gap-2"),c(It,"class","mb-2 flex flex-wrap items-center gap-3 text-sm text-slate-600"),c(jt,"class","font-semibold mb-2"),c(Ut,"class","font-semibold mb-2"),c(t,"class","bg-white dark:bg-slate-800 rounded-lg shadow p-4 space-y-4")},m(V,N){J(V,t,N),e(t,a),e(a,r),e(r,v),e(r,_),e(r,f),e(f,d),e(a,h),e(a,o),e(o,g),e(o,p),e(o,T),e(T,H),e(a,F),e(a,y),e(y,S),e(y,Z),e(y,z),e(z,et),e(a,Dt),e(a,P),e(P,W),e(P,dt),e(P,at),e(at,D),e(t,U),e(t,L),e(L,X),e(X,ot),e(X,I),e(X,A),e(A,j),e(L,Q),e(L,$),e($,tt),e($,st),e($,nt),e(nt,Yt),e($,Zt),e($,ht),e(ht,Ae),e(ht,_e),e(ht,Be),e(ht,ve),e(ht,fe),e(L,Re),e(L,Vt),e(Vt,Mt),e(Vt,He),e(Vt,Jt),e(Jt,he),e(t,je),e(t,mt),e(mt,wt),e(wt,Ft),e(wt,Ue),e(wt,Kt),e(Kt,me),e(mt,Qe),e(mt,Tt),e(Tt,Pt),e(Tt,ze),e(Tt,Wt),e(Wt,pe),e(mt,Ge),e(mt,kt),e(kt,At),e(kt,Ye),e(kt,Xt),e(Xt,be),e(t,Ze),e(t,pt),e(pt,Bt),e(pt,Je),e(pt,It),e(It,yt),e(yt,Rt),e(yt,Ke),e(yt,lt),e(lt,bt),e(lt,gt),e(lt,Ct),oe(lt,l[3],!0),e(It,We),e(It,Nt),e(Nt,Ht),e(Nt,Xe),e(Nt,it),e(it,xt),e(it,Et),oe(it,l[4],!0),e(pt,$e),ct.m(pt,null),e(t,ta),e(t,St),e(St,jt),e(St,ea),ut.m(St,null),e(t,aa),e(t,Lt),e(Lt,Ut),e(Lt,la),_t.m(Lt,null),oa||(Da=[Qt(lt,"change",l[31]),Qt(it,"change",l[32])],oa=!0)},p(V,N){var vt;N[0]&256&&s!==(s=V[22](V[8])+"")&&B(d,s),N[0]&128&&B(H,V[7]),N[0]&1048576&&G!==(G=V[22](V[20])+"")&&B(et,G),N[0]&1&&K!==(K=V[22](((vt=V[0])==null?void 0:vt.valor_inicial)||0)+"")&&B(D,K),N[0]&16384&&Y!==(Y=V[22](V[14])+"")&&B(j,Y),N[0]&1024&&ft!==(ft=V[22](V[10])+"")&&B(Yt,ft),N[0]&8192&&re!==(re=V[22](V[13])+"")&&B(_e,re),N[0]&4096&&se!==(se=V[22](V[12])+"")&&B(ve,se),N[0]&2048&&ne!==(ne=V[11]>0?` · Outros ${V[22](V[11])}`:"")&&B(fe,ne),N[0]&512&&ie!==(ie=V[22](V[9])+"")&&B(he,ie),N[0]&64&&de!==(de=V[22](V[6])+"")&&B(me,de),N[0]&32&&ce!==(ce=V[22](V[5])+"")&&B(pe,ce),N[0]&524288&&ue!==(ue=V[22](V[19])+"")&&B(be,ue),N[0]&8&&oe(lt,V[3]),N[0]&16&&oe(it,V[4]),ge===(ge=Va(V))&&ct?ct.p(V,N):(ct.d(1),ct=ge(V),ct&&(ct.c(),ct.m(pt,null))),Ce===(Ce=wa(V))&&ut?ut.p(V,N):(ut.d(1),ut=Ce(V),ut&&(ut.c(),ut.m(St,null))),xe===(xe=Ta(V))&&_t?_t.p(V,N):(_t.d(1),_t=xe(V),_t&&(_t.c(),_t.m(Lt,null)))},d(V){V&&u(t),ct.d(),ut.d(),_t.d(),oa=!1,Za(Da)}}}function el(l){let t,a="Nenhum caixa selecionado.";return{c(){t=i("div"),t.textContent=a,this.h()},l(r){t=n(r,"DIV",{class:!0,"data-svelte-h":!0}),q(t)!=="svelte-1bzggrg"&&(t.textContent=a),this.h()},h(){c(t,"class","text-sm text-slate-600")},m(r,v){J(r,t,v)},p:Gt,d(r){r&&u(t)}}}function al(l){let t,a="Carregando...";return{c(){t=i("div"),t.textContent=a},l(r){t=n(r,"DIV",{"data-svelte-h":!0}),q(t)!=="svelte-btlswi"&&(t.textContent=a)},m(r,v){J(r,t,v)},p:Gt,d(r){r&&u(t)}}}function ll(l){let t,a,r,v='<tr class="text-left text-slate-500"><th class="py-2 pr-4">Produto</th> <th class="py-2 pr-4">Quantidade</th> <th class="py-2">Receita</th></tr>',w,_,f=Ot(l[21]),s=[];for(let d=0;d<f.length;d+=1)s[d]=za(Ha(l,f,d));return{c(){t=i("div"),a=i("table"),r=i("thead"),r.innerHTML=v,w=E(),_=i("tbody");for(let d=0;d<s.length;d+=1)s[d].c();this.h()},l(d){t=n(d,"DIV",{class:!0});var h=m(t);a=n(h,"TABLE",{class:!0});var o=m(a);r=n(o,"THEAD",{"data-svelte-h":!0}),q(r)!=="svelte-1hrxt82"&&(r.innerHTML=v),w=x(o),_=n(o,"TBODY",{class:!0});var g=m(_);for(let C=0;C<s.length;C+=1)s[C].l(g);g.forEach(u),o.forEach(u),h.forEach(u),this.h()},h(){c(_,"class","divide-y"),c(a,"class","min-w-full text-sm"),c(t,"class","overflow-x-auto")},m(d,h){J(d,t,h),e(t,a),e(a,r),e(a,w),e(a,_);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(_,null)},p(d,h){if(h[0]&6291456){f=Ot(d[21]);let o;for(o=0;o<f.length;o+=1){const g=Ha(d,f,o);s[o]?s[o].p(g,h):(s[o]=za(g),s[o].c(),s[o].m(_,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=f.length}},d(d){d&&u(t),Pe(s,d)}}}function ol(l){let t,a="Sem itens em vendas para este caixa.";return{c(){t=i("div"),t.textContent=a,this.h()},l(r){t=n(r,"DIV",{class:!0,"data-svelte-h":!0}),q(t)!=="svelte-rxw0n3"&&(t.textContent=a),this.h()},h(){c(t,"class","text-sm text-slate-600")},m(r,v){J(r,t,v)},p:Gt,d(r){r&&u(t)}}}function za(l){let t,a,r=l[40].nome+"",v,w,_,f=l[40].quantidade+"",s,d,h,o=l[22](l[40].receita)+"",g,C;return{c(){t=i("tr"),a=i("td"),v=M(r),w=E(),_=i("td"),s=M(f),d=E(),h=i("td"),g=M(o),C=E(),this.h()},l(p){t=n(p,"TR",{});var T=m(t);a=n(T,"TD",{class:!0});var H=m(a);v=O(H,r),H.forEach(u),w=x(T),_=n(T,"TD",{class:!0});var F=m(_);s=O(F,f),F.forEach(u),d=x(T),h=n(T,"TD",{class:!0});var y=m(h);g=O(y,o),y.forEach(u),C=x(T),T.forEach(u),this.h()},h(){c(a,"class","py-2 pr-4"),c(_,"class","py-2 pr-4"),c(h,"class","py-2")},m(p,T){J(p,t,T),e(t,a),e(a,v),e(t,w),e(t,_),e(_,s),e(t,d),e(t,h),e(h,g),e(t,C)},p(p,T){T[0]&2097152&&r!==(r=p[40].nome+"")&&B(v,r),T[0]&2097152&&f!==(f=p[40].quantidade+"")&&B(s,f),T[0]&2097152&&o!==(o=p[22](p[40].receita)+"")&&B(g,o)},d(p){p&&u(t)}}}function rl(l){let t,a,r,v='<tr class="text-left text-slate-500"><th class="py-2 pr-4">#</th> <th class="py-2 pr-4">Forma</th> <th class="py-2">Total</th></tr>',w,_,f=Ot(l[1]),s=[];for(let d=0;d<f.length;d+=1)s[d]=Ga(Ra(l,f,d));return{c(){t=i("div"),a=i("table"),r=i("thead"),r.innerHTML=v,w=E(),_=i("tbody");for(let d=0;d<s.length;d+=1)s[d].c();this.h()},l(d){t=n(d,"DIV",{class:!0});var h=m(t);a=n(h,"TABLE",{class:!0});var o=m(a);r=n(o,"THEAD",{"data-svelte-h":!0}),q(r)!=="svelte-2zds38"&&(r.innerHTML=v),w=x(o),_=n(o,"TBODY",{class:!0});var g=m(_);for(let C=0;C<s.length;C+=1)s[C].l(g);g.forEach(u),o.forEach(u),h.forEach(u),this.h()},h(){c(_,"class","divide-y"),c(a,"class","min-w-full text-sm"),c(t,"class","overflow-x-auto")},m(d,h){J(d,t,h),e(t,a),e(a,r),e(a,w),e(a,_);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(_,null)},p(d,h){if(h[0]&4194306){f=Ot(d[1]);let o;for(o=0;o<f.length;o+=1){const g=Ra(d,f,o);s[o]?s[o].p(g,h):(s[o]=Ga(g),s[o].c(),s[o].m(_,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=f.length}},d(d){d&&u(t),Pe(s,d)}}}function sl(l){let t,a="Sem vendas para este caixa.";return{c(){t=i("div"),t.textContent=a,this.h()},l(r){t=n(r,"DIV",{class:!0,"data-svelte-h":!0}),q(t)!=="svelte-tx9trq"&&(t.textContent=a),this.h()},h(){c(t,"class","text-sm text-slate-600")},m(r,v){J(r,t,v)},p:Gt,d(r){r&&u(t)}}}function Ga(l){let t,a,r=l[37].id+"",v,w,_,f=l[37].forma_pagamento+"",s,d,h,o=l[22](l[37].valor_total)+"",g,C;return{c(){t=i("tr"),a=i("td"),v=M(r),w=E(),_=i("td"),s=M(f),d=E(),h=i("td"),g=M(o),C=E(),this.h()},l(p){t=n(p,"TR",{});var T=m(t);a=n(T,"TD",{class:!0});var H=m(a);v=O(H,r),H.forEach(u),w=x(T),_=n(T,"TD",{class:!0});var F=m(_);s=O(F,f),F.forEach(u),d=x(T),h=n(T,"TD",{class:!0});var y=m(h);g=O(y,o),y.forEach(u),C=x(T),T.forEach(u),this.h()},h(){c(a,"class","py-2 pr-4"),c(_,"class","py-2 pr-4"),c(h,"class","py-2")},m(p,T){J(p,t,T),e(t,a),e(a,v),e(t,w),e(t,_),e(_,s),e(t,d),e(t,h),e(h,g),e(t,C)},p(p,T){T[0]&2&&r!==(r=p[37].id+"")&&B(v,r),T[0]&2&&f!==(f=p[37].forma_pagamento+"")&&B(s,f),T[0]&2&&o!==(o=p[22](p[37].valor_total)+"")&&B(g,o)},d(p){p&&u(t)}}}function nl(l){let t,a,r,v='<tr class="text-left text-slate-500"><th class="py-2 pr-4">Quando</th> <th class="py-2 pr-4">Tipo</th> <th class="py-2 pr-4">Valor</th> <th class="py-2">Motivo</th></tr>',w,_,f=Ot(l[2]),s=[];for(let d=0;d<f.length;d+=1)s[d]=Ya(Ba(l,f,d));return{c(){t=i("div"),a=i("table"),r=i("thead"),r.innerHTML=v,w=E(),_=i("tbody");for(let d=0;d<s.length;d+=1)s[d].c();this.h()},l(d){t=n(d,"DIV",{class:!0});var h=m(t);a=n(h,"TABLE",{class:!0});var o=m(a);r=n(o,"THEAD",{"data-svelte-h":!0}),q(r)!=="svelte-vlkyq"&&(r.innerHTML=v),w=x(o),_=n(o,"TBODY",{class:!0});var g=m(_);for(let C=0;C<s.length;C+=1)s[C].l(g);g.forEach(u),o.forEach(u),h.forEach(u),this.h()},h(){c(_,"class","divide-y"),c(a,"class","min-w-full text-sm"),c(t,"class","overflow-x-auto")},m(d,h){J(d,t,h),e(t,a),e(a,r),e(a,w),e(a,_);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(_,null)},p(d,h){if(h[0]&4194308){f=Ot(d[2]);let o;for(o=0;o<f.length;o+=1){const g=Ba(d,f,o);s[o]?s[o].p(g,h):(s[o]=Ya(g),s[o].c(),s[o].m(_,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=f.length}},d(d){d&&u(t),Pe(s,d)}}}function il(l){let t,a="Sem sangrias/suprimentos.";return{c(){t=i("div"),t.textContent=a,this.h()},l(r){t=n(r,"DIV",{class:!0,"data-svelte-h":!0}),q(t)!=="svelte-d0vhoe"&&(t.textContent=a),this.h()},h(){c(t,"class","text-sm text-slate-600")},m(r,v){J(r,t,v)},p:Gt,d(r){r&&u(t)}}}function Ya(l){let t,a,r=(l[34].created_at?new Date(l[34].created_at).toLocaleString():"-")+"",v,w,_,f=l[34].tipo+"",s,d,h,o=l[22](l[34].valor)+"",g,C,p,T=(l[34].motivo||"")+"",H,F;return{c(){t=i("tr"),a=i("td"),v=M(r),w=E(),_=i("td"),s=M(f),d=E(),h=i("td"),g=M(o),C=E(),p=i("td"),H=M(T),F=E(),this.h()},l(y){t=n(y,"TR",{});var S=m(t);a=n(S,"TD",{class:!0});var k=m(a);v=O(k,r),k.forEach(u),w=x(S),_=n(S,"TD",{class:!0});var Z=m(_);s=O(Z,f),Z.forEach(u),d=x(S),h=n(S,"TD",{class:!0});var z=m(h);g=O(z,o),z.forEach(u),C=x(S),p=n(S,"TD",{class:!0});var G=m(p);H=O(G,T),G.forEach(u),F=x(S),S.forEach(u),this.h()},h(){c(a,"class","py-2 pr-4"),c(_,"class","py-2 pr-4"),c(h,"class","py-2 pr-4"),c(p,"class","py-2")},m(y,S){J(y,t,S),e(t,a),e(a,v),e(t,w),e(t,_),e(_,s),e(t,d),e(t,h),e(h,g),e(t,C),e(t,p),e(p,H),e(t,F)},p(y,S){S[0]&4&&r!==(r=(y[34].created_at?new Date(y[34].created_at).toLocaleString():"-")+"")&&B(v,r),S[0]&4&&f!==(f=y[34].tipo+"")&&B(s,f),S[0]&4&&o!==(o=y[22](y[34].valor)+"")&&B(g,o),S[0]&4&&T!==(T=(y[34].motivo||"")+"")&&B(H,T)},d(y){y&&u(t)}}}function dl(l){let t,a="Relatórios",r,v,w,_,f,s,d="Selecionar caixa",h,o,g,C,p,T="Exportar Resumo",H,F,y="Exportar Vendas",S,k,Z="Exportar Itens",z,G,et,Dt,P=l[16]&&Ua(l),W=Ot(l[17]),R=[];for(let D=0;D<W.length;D+=1)R[D]=Qa(ja(l,W,D));function dt(D,U){return D[15]?al:D[18]?tl:el}let at=dt(l),K=at(l);return{c(){t=i("h1"),t.textContent=a,r=E(),P&&P.c(),v=E(),w=i("section"),_=i("div"),f=i("div"),s=i("label"),s.textContent=d,h=E(),o=i("select");for(let D=0;D<R.length;D+=1)R[D].c();g=E(),C=i("div"),p=i("button"),p.textContent=T,H=E(),F=i("button"),F.textContent=y,S=E(),k=i("button"),k.textContent=Z,z=E(),K.c(),G=Aa(),this.h()},l(D){t=n(D,"H1",{class:!0,"data-svelte-h":!0}),q(t)!=="svelte-19pjdfu"&&(t.textContent=a),r=x(D),P&&P.l(D),v=x(D),w=n(D,"SECTION",{class:!0});var U=m(w);_=n(U,"DIV",{class:!0});var L=m(_);f=n(L,"DIV",{});var X=m(f);s=n(X,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),q(s)!=="svelte-zlh1vh"&&(s.textContent=d),h=x(X),o=n(X,"SELECT",{id:!0,class:!0});var ot=m(o);for(let I=0;I<R.length;I+=1)R[I].l(ot);ot.forEach(u),X.forEach(u),g=x(L),C=n(L,"DIV",{class:!0});var b=m(C);p=n(b,"BUTTON",{class:!0,"data-svelte-h":!0}),q(p)!=="svelte-1afys8g"&&(p.textContent=T),H=x(b),F=n(b,"BUTTON",{class:!0,"data-svelte-h":!0}),q(F)!=="svelte-1m0t22w"&&(F.textContent=y),S=x(b),k=n(b,"BUTTON",{class:!0,"data-svelte-h":!0}),q(k)!=="svelte-kr1peu"&&(k.textContent=Z),b.forEach(u),L.forEach(u),U.forEach(u),z=x(D),K.l(D),G=Aa(),this.h()},h(){c(t,"class","text-2xl font-semibold mb-4"),c(s,"class","block text-sm text-slate-600 mb-1"),c(s,"for","select-caixa"),c(o,"id","select-caixa"),c(o,"class","input-form"),l[18]===void 0&&ia(()=>l[29].call(o)),c(p,"class","btn-secondary"),c(F,"class","btn-secondary"),c(k,"class","btn-secondary"),c(C,"class","flex gap-2 justify-end"),c(_,"class","grid md:grid-cols-2 gap-4 items-end"),c(w,"class","bg-white dark:bg-slate-800 rounded-lg shadow p-4 mb-4")},m(D,U){J(D,t,U),J(D,r,U),P&&P.m(D,U),J(D,v,U),J(D,w,U),e(w,_),e(_,f),e(f,s),e(f,h),e(f,o);for(let L=0;L<R.length;L+=1)R[L]&&R[L].m(o,null);oe(o,l[18],!0),e(_,g),e(_,C),e(C,p),e(C,H),e(C,F),e(C,S),e(C,k),J(D,z,U),K.m(D,U),J(D,G,U),et||(Dt=[Qt(o,"change",l[29]),Qt(o,"change",l[30]),Qt(p,"click",l[26]),Qt(F,"click",l[24]),Qt(k,"click",l[25])],et=!0)},p(D,U){if(D[16]?P?P.p(D,U):(P=Ua(D),P.c(),P.m(v.parentNode,v)):P&&(P.d(1),P=null),U[0]&131072){W=Ot(D[17]);let L;for(L=0;L<W.length;L+=1){const X=ja(D,W,L);R[L]?R[L].p(X,U):(R[L]=Qa(X),R[L].c(),R[L].m(o,null))}for(;L<R.length;L+=1)R[L].d(1);R.length=W.length}U[0]&393216&&oe(o,D[18]),at===(at=dt(D))&&K?K.p(D,U):(K.d(1),K=at(D),K&&(K.c(),K.m(G.parentNode,G)))},i:Gt,o:Gt,d(D){D&&(u(t),u(r),u(v),u(w),u(z),u(G)),P&&P.d(D),Pe(R,D),K.d(D),et=!1,Za(Dt)}}}function na(l,t){const a=t.map(_=>_.map(f=>{const s=String(f??"");return/[",\n]/.test(s)?'"'+s.replace(/"/g,'""')+'"':s}).join(",")).join(`
`),r=new Blob([a],{type:"text/csv;charset=utf-8;"}),v=URL.createObjectURL(r),w=document.createElement("a");w.href=v,w.download=l,w.click(),setTimeout(()=>URL.revokeObjectURL(v),2e3)}function cl(l,t,a){let r,v,w,_,f,s,d,h,o,g,C,p,T,H=!0,F="",y=[],S=null,k=null,Z=[],z=[],G=new Map,et=[],Dt=[];const P=b=>`R$ ${Number(b||0).toFixed(2)}`;Ka(async()=>{var I,A;if(await $a({requireProfile:!0}))try{const{data:Y}=await qt.auth.getUser(),j=(I=Y==null?void 0:Y.user)==null?void 0:I.id;if(!j){window.location.href="/login";return}const Q=new Date;Q.setDate(Q.getDate()-60);const{data:$,error:tt}=await qt.from("caixas").select("id, data_abertura, data_fechamento, valor_inicial").eq("id_usuario",j).gte("data_abertura",Q.toISOString()).order("data_abertura",{ascending:!1});if(tt)throw tt;if(a(17,y=$||[]),y.length===0){a(15,H=!1);return}a(18,S=(A=y[0])==null?void 0:A.id),await W(S);const rt=new Date;rt.setDate(rt.getDate()-30);const{data:st,error:nt}=await qt.from("caixa_fechamentos").select("id, data_fechamento, total_dinheiro, total_cartao, total_pix, total_geral, valor_inicial, valor_esperado_em_gaveta, valor_contado_em_gaveta, diferenca, quantidade_vendas").eq("id_usuario",j).gte("data_fechamento",rt.toISOString()).order("data_fechamento",{ascending:!1});if(nt)throw nt;Dt=st||[]}catch(Y){a(16,F=(Y==null?void 0:Y.message)||"Erro ao carregar relatórios.")}finally{a(15,H=!1)}});async function W(b){if(b)try{a(15,H=!0),a(16,F="");const{data:I,error:A}=await qt.from("caixas").select("id, data_abertura, data_fechamento, valor_inicial").eq("id",b).single();if(A)throw A;a(0,k=I);const{data:Y,error:j}=await qt.from("vendas").select("id, valor_total, forma_pagamento, valor_recebido, valor_troco").eq("id_caixa",b).order("id",{ascending:!0});if(j)throw j;a(1,Z=Y||[]);const Q=(Z||[]).map(rt=>rt.id);if(a(27,z=[]),Q.length){const{data:rt,error:st}=await qt.from("vendas_itens").select("id_venda, id_produto, nome_produto_na_venda, quantidade, preco_unitario_na_venda").in("id_venda",Q);if(st)throw st;a(27,z=rt||[]);const nt=Array.from(new Set((z||[]).map(ft=>ft.id_produto).filter(Boolean)));if(a(28,G=new Map),nt.length){const{data:ft,error:Yt}=await qt.from("produtos").select("id, nome, preco").in("id",nt);!Yt&&ft&&a(28,G=new Map(ft.map(Zt=>[Zt.id,Zt])))}}const{data:$,error:tt}=await qt.from("caixa_movimentacoes").select("tipo, valor, motivo, created_at").eq("id_caixa",b).order("created_at",{ascending:!1});if(tt)throw tt;a(2,et=$||[])}catch(I){a(16,F=(I==null?void 0:I.message)||"Erro ao carregar dados do caixa.")}finally{a(15,H=!1)}}let R="receita",dt="desc";function at(){const b=["id_venda","forma_pagamento","valor_total"],I=(Z||[]).map(A=>[A.id,A.forma_pagamento,Number(A.valor_total||0).toFixed(2)]);na(`vendas_caixa_${(k==null?void 0:k.id)||""}.csv`,[b,...I])}function K(){const b=["id_venda","produto","quantidade","total_item"],I=(z||[]).map(A=>{var Q;const Y=Number(A.quantidade||0),j=A.id_produto?Number(((Q=G.get(A.id_produto))==null?void 0:Q.preco)||0):Number(A.preco_unitario_na_venda||0);return[A.id_venda,A.nome_produto_na_venda,Y,(j*Y).toFixed(2)]});na(`itens_caixa_${(k==null?void 0:k.id)||""}.csv`,[b,...I])}function D(){const b=[["Caixa",(k==null?void 0:k.id)||""],["Abertura",k!=null&&k.data_abertura?new Date(k.data_abertura).toLocaleString():""],["Fechamento",k!=null&&k.data_fechamento?new Date(k.data_fechamento).toLocaleString():"—"],["Valor inicial",Number((k==null?void 0:k.valor_inicial)||0).toFixed(2)],["Vendas (Dinheiro)",Number(r).toFixed(2)],["Vendas (Cartão - Débito)",Number(v).toFixed(2)],["Vendas (Cartão - Crédito)",Number(w).toFixed(2)],["Vendas (Cartão - Outros/legado)",Number(_).toFixed(2)],["Vendas (Cartão - Total)",Number(f).toFixed(2)],["Vendas (Pix)",Number(s).toFixed(2)],["Vendas (Total)",Number(d).toFixed(2)],["Qtd. vendas",h],["Ticket médio",Number(o).toFixed(2)],["Sangria",Number(g).toFixed(2)],["Suprimento",Number(C).toFixed(2)],["Saldo esperado em gaveta",Number(p).toFixed(2)]];na(`resumo_caixa_${(k==null?void 0:k.id)||""}.csv`,b)}function U(){S=sa(this),a(18,S),a(17,y)}const L=()=>W(S);function X(){R=sa(this),a(3,R)}function ot(){dt=sa(this),a(4,dt)}return l.$$.update=()=>{l.$$.dirty[0]&2&&a(14,r=(Z||[]).filter(b=>b.forma_pagamento==="dinheiro").reduce((b,I)=>b+Number(I.valor_total||0),0)),l.$$.dirty[0]&2&&a(13,v=(Z||[]).filter(b=>b.forma_pagamento==="cartao_debito").reduce((b,I)=>b+Number(I.valor_total||0),0)),l.$$.dirty[0]&2&&a(12,w=(Z||[]).filter(b=>b.forma_pagamento==="cartao_credito").reduce((b,I)=>b+Number(I.valor_total||0),0)),l.$$.dirty[0]&2&&a(11,_=(Z||[]).filter(b=>b.forma_pagamento==="cartao").reduce((b,I)=>b+Number(I.valor_total||0),0)),l.$$.dirty[0]&14336&&a(10,f=Number(v+w+_)),l.$$.dirty[0]&2&&a(9,s=(Z||[]).filter(b=>b.forma_pagamento==="pix").reduce((b,I)=>b+Number(I.valor_total||0),0)),l.$$.dirty[0]&17920&&a(8,d=Number(r+f+s)),l.$$.dirty[0]&2&&a(7,h=(Z||[]).length),l.$$.dirty[0]&384&&a(20,o=h?d/h:0),l.$$.dirty[0]&4&&a(6,g=(et||[]).filter(b=>b.tipo==="sangria").reduce((b,I)=>b+Number(I.valor||0),0)),l.$$.dirty[0]&4&&a(5,C=(et||[]).filter(b=>b.tipo==="suprimento").reduce((b,I)=>b+Number(I.valor||0),0)),l.$$.dirty[0]&16481&&a(19,p=Number(((k==null?void 0:k.valor_inicial)||0)+r-g+C)),l.$$.dirty[0]&402653208&&a(21,T=(()=>{var Y;const b=new Map;for(const j of z||[]){const Q=j.nome_produto_na_venda||"Item",$=Number(j.quantidade||0),rt=(j.id_produto?Number(((Y=G.get(j.id_produto))==null?void 0:Y.preco)||0):Number(j.preco_unitario_na_venda||0))*$,st=b.get(Q)||{nome:Q,quantidade:0,receita:0};st.quantidade+=$,st.receita+=rt,b.set(Q,st)}let I=Array.from(b.values());const A=dt==="asc"?1:-1;return R==="quantidade"?I.sort((j,Q)=>A*(j.quantidade-Q.quantidade)):R==="alfabetica"?I.sort((j,Q)=>A*j.nome.localeCompare(Q.nome,"pt-BR")):I.sort((j,Q)=>A*(j.receita-Q.receita)),I.slice(0,10)})())},[k,Z,et,R,dt,C,g,h,d,s,f,_,w,v,r,H,F,y,S,p,o,T,P,W,at,K,D,z,G,U,L,X,ot]}class ml extends Wa{constructor(t){super(),Xa(this,t,cl,dl,Ja,{},null,[-1,-1])}}export{ml as component};
