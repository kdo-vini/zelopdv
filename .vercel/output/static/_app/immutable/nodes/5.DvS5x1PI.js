import{s as Be,n as Te,r as Pe,o as ot,d as rt}from"../chunks/DUJQqtHE.js";import{S as Ae,i as Me,d as _,u as X,a as Z,b as n,v as K,o as u,c,e as v,p as W,g as D,h as d,j as V,s as ke,f as x,t as $,r as ve,x as Oe,y as we,w as Se,D as Fe,k as Re,l as He,F as je,G as ze,E as Ge}from"../chunks/CBbGAyDJ.js";import{e as Ee}from"../chunks/BMMEC0mH.js";import{s as pe}from"../chunks/BxpIoVra.js";function Ye(a,e,t){const l=a.slice();return l[17]=e[t],l}function Je(a){let e,t;return{c(){e=d("div"),t=$(a[1]),this.h()},l(l){e=c(l,"DIV",{class:!0});var o=v(e);t=x(o,a[1]),o.forEach(_),this.h()},h(){u(e,"class","mb-4 text-sm text-red-600")},m(l,o){Z(l,e,o),n(e,t)},p(l,o){o&2&&ke(t,l[1])},d(l){l&&_(e)}}}function nt(a){let e,t=Ee(a[0]),l=[];for(let o=0;o<t.length;o+=1)l[o]=Ke(Ye(a,t,o));return{c(){e=d("div");for(let o=0;o<l.length;o+=1)l[o].c();this.h()},l(o){e=c(o,"DIV",{class:!0});var i=v(e);for(let r=0;r<l.length;r+=1)l[r].l(i);i.forEach(_),this.h()},h(){u(e,"class","divide-y")},m(o,i){Z(o,e,i);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null)},p(o,i){if(i&1969){t=Ee(o[0]);let r;for(r=0;r<t.length;r+=1){const s=Ye(o,t,r);l[r]?l[r].p(s,i):(l[r]=Ke(s),l[r].c(),l[r].m(e,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=t.length}},d(o){o&&_(e),Oe(l,o)}}}function st(a){let e,t="Carregando...";return{c(){e=d("div"),e.textContent=t},l(l){e=c(l,"DIV",{"data-svelte-h":!0}),W(e)!=="svelte-btlswi"&&(e.textContent=t)},m(l,o){Z(l,e,o)},p:Te,d(l){l&&_(e)}}}function at(a){let e,t,l,o=a[17].nome+"",i,r,s,p,f=a[17].ordem+"",g,h,m,E,M="Editar",C,N,j="Excluir",T,F;function P(){return a[14](a[17])}function w(){return a[15](a[17])}return{c(){e=d("div"),t=d("div"),l=d("div"),i=$(o),r=V(),s=d("div"),p=$("Ordem: "),g=$(f),h=V(),m=d("div"),E=d("button"),E.textContent=M,C=V(),N=d("button"),N.textContent=j,this.h()},l(k){e=c(k,"DIV",{class:!0});var q=v(e);t=c(q,"DIV",{});var L=v(t);l=c(L,"DIV",{class:!0});var U=v(l);i=x(U,o),U.forEach(_),r=D(L),s=c(L,"DIV",{class:!0});var b=v(s);p=x(b,"Ordem: "),g=x(b,f),b.forEach(_),L.forEach(_),h=D(q),m=c(q,"DIV",{class:!0});var I=v(m);E=c(I,"BUTTON",{class:!0,"data-svelte-h":!0}),W(E)!=="svelte-cfoalh"&&(E.textContent=M),C=D(I),N=c(I,"BUTTON",{class:!0,"data-svelte-h":!0}),W(N)!=="svelte-175usm0"&&(N.textContent=j),I.forEach(_),q.forEach(_),this.h()},h(){u(l,"class","font-medium"),u(s,"class","text-sm text-slate-500"),u(E,"class","btn-secondary svelte-1d6975i"),u(N,"class","btn-danger svelte-1d6975i"),u(m,"class","flex gap-2"),u(e,"class","flex items-center justify-between")},m(k,q){Z(k,e,q),n(e,t),n(t,l),n(l,i),n(t,r),n(t,s),n(s,p),n(s,g),n(e,h),n(e,m),n(m,E),n(m,C),n(m,N),T||(F=[K(E,"click",P),K(N,"click",w)],T=!0)},p(k,q){a=k,q&1&&o!==(o=a[17].nome+"")&&ke(i,o),q&1&&f!==(f=a[17].ordem+"")&&ke(g,f)},d(k){k&&_(e),T=!1,Pe(F)}}}function it(a){let e,t,l,o,i,r,s,p,f,g,h,m,E,M,C,N,j,T,F,P="Salvar",w,k,q="Cancelar",L,U;return{c(){e=d("form"),t=d("div"),l=d("label"),o=$("Nome"),r=V(),s=d("input"),f=V(),g=d("div"),h=d("label"),m=$("Ordem"),M=V(),C=d("input"),j=V(),T=d("div"),F=d("button"),F.textContent=P,w=V(),k=d("button"),k.textContent=q,this.h()},l(b){e=c(b,"FORM",{class:!0});var I=v(e);t=c(I,"DIV",{});var H=v(t);l=c(H,"LABEL",{for:!0,class:!0});var te=v(l);o=x(te,"Nome"),te.forEach(_),r=D(H),s=c(H,"INPUT",{id:!0,class:!0}),H.forEach(_),f=D(I),g=c(I,"DIV",{});var G=v(g);h=c(G,"LABEL",{for:!0,class:!0});var re=v(h);m=x(re,"Ordem"),re.forEach(_),M=D(G),C=c(G,"INPUT",{id:!0,type:!0,class:!0}),G.forEach(_),j=D(I),T=c(I,"DIV",{class:!0});var oe=v(T);F=c(oe,"BUTTON",{class:!0,"data-svelte-h":!0}),W(F)!=="svelte-k66zcr"&&(F.textContent=P),w=D(oe),k=c(oe,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),W(k)!=="svelte-1h91p4y"&&(k.textContent=q),oe.forEach(_),I.forEach(_),this.h()},h(){u(l,"for",i=`comp-edit-cat-nome-${a[17].id}`),u(l,"class","block text-sm mb-1"),u(s,"id",p=`comp-edit-cat-nome-${a[17].id}`),u(s,"class","input-form svelte-1d6975i"),s.required=!0,u(h,"for",E=`comp-edit-cat-ordem-${a[17].id}`),u(h,"class","block text-sm mb-1"),u(C,"id",N=`comp-edit-cat-ordem-${a[17].id}`),u(C,"type","number"),u(C,"class","input-form svelte-1d6975i"),C.required=!0,u(F,"class","btn-primary svelte-1d6975i"),u(k,"type","button"),u(k,"class","btn-secondary svelte-1d6975i"),u(T,"class","md:col-span-2 flex gap-2"),u(e,"class","grid md:grid-cols-2 gap-4")},m(b,I){Z(b,e,I),n(e,t),n(t,l),n(l,o),n(t,r),n(t,s),X(s,a[5].nome),n(e,f),n(e,g),n(g,h),n(h,m),n(g,M),n(g,C),X(C,a[5].ordem),n(e,j),n(e,T),n(T,F),n(T,w),n(T,k),L||(U=[K(s,"input",a[12]),K(C,"input",a[13]),K(k,"click",a[8]),K(e,"submit",a[9])],L=!0)},p(b,I){I&1&&i!==(i=`comp-edit-cat-nome-${b[17].id}`)&&u(l,"for",i),I&1&&p!==(p=`comp-edit-cat-nome-${b[17].id}`)&&u(s,"id",p),I&32&&s.value!==b[5].nome&&X(s,b[5].nome),I&1&&E!==(E=`comp-edit-cat-ordem-${b[17].id}`)&&u(h,"for",E),I&1&&N!==(N=`comp-edit-cat-ordem-${b[17].id}`)&&u(C,"id",N),I&32&&ve(C.value)!==b[5].ordem&&X(C,b[5].ordem)},d(b){b&&_(e),L=!1,Pe(U)}}}function Ke(a){let e,t;function l(r,s){return r[4]===r[17].id?it:at}let o=l(a),i=o(a);return{c(){e=d("div"),i.c(),t=V(),this.h()},l(r){e=c(r,"DIV",{class:!0});var s=v(e);i.l(s),t=D(s),s.forEach(_),this.h()},h(){u(e,"class","py-3")},m(r,s){Z(r,e,s),i.m(e,null),n(e,t)},p(r,s){o===(o=l(r))&&i?i.p(r,s):(i.d(1),i=o(r),i&&(i.c(),i.m(e,t)))},d(r){r&&_(e),i.d()}}}function ut(a){let e,t,l="Categorias",o,i,r,s,p,f,g="Nome",h,m,E,M,C="/* Usa classes globais em src/app.css (.input-form, .btn-*) */",N,j,T='<button class="btn-primary svelte-1d6975i">Salvar</button>',F,P,w,k=a[1]&&Je(a);function q(b,I){return b[2]?st:nt}let L=q(a),U=L(a);return{c(){e=d("section"),t=d("div"),t.textContent=l,o=V(),i=d("div"),k&&k.c(),r=V(),s=d("form"),p=d("div"),f=d("label"),f.textContent=g,h=V(),m=d("input"),E=V(),M=d("style"),M.textContent=C,N=V(),j=d("div"),j.innerHTML=T,F=V(),U.c(),this.h()},l(b){e=c(b,"SECTION",{class:!0});var I=v(e);t=c(I,"DIV",{class:!0,"data-svelte-h":!0}),W(t)!=="svelte-19f74ck"&&(t.textContent=l),o=D(I),i=c(I,"DIV",{class:!0});var H=v(i);k&&k.l(H),r=D(H),s=c(H,"FORM",{class:!0});var te=v(s);p=c(te,"DIV",{});var G=v(p);f=c(G,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),W(f)!=="svelte-1y8h7oy"&&(f.textContent=g),h=D(G),m=c(G,"INPUT",{id:!0,class:!0}),E=D(G),M=c(G,"STYLE",{lang:!0,"data-svelte-h":!0}),W(M)!=="svelte-k0tr4c"&&(M.textContent=C),N=D(G),j=c(G,"DIV",{class:!0,"data-svelte-h":!0}),W(j)!=="svelte-sqvv1u"&&(j.innerHTML=T),G.forEach(_),te.forEach(_),F=D(H),U.l(H),H.forEach(_),I.forEach(_),this.h()},h(){u(t,"class","p-4 border-b font-semibold"),u(f,"for","comp-cat-nome"),u(f,"class","block text-sm mb-1"),u(m,"id","comp-cat-nome"),u(m,"class","input-form svelte-1d6975i"),m.required=!0,u(M,"lang","postcss"),u(j,"class","md:col-span-2"),u(s,"class","grid md:grid-cols-2 gap-4 mb-6"),u(i,"class","p-4"),u(e,"class","bg-white dark:bg-slate-800 rounded-lg shadow")},m(b,I){Z(b,e,I),n(e,t),n(e,o),n(e,i),k&&k.m(i,null),n(i,r),n(i,s),n(s,p),n(p,f),n(p,h),n(p,m),X(m,a[3].nome),n(p,E),n(p,M),n(p,N),n(p,j),n(i,F),U.m(i,null),P||(w=[K(m,"input",a[11]),K(s,"submit",a[6])],P=!0)},p(b,[I]){b[1]?k?k.p(b,I):(k=Je(b),k.c(),k.m(i,r)):k&&(k.d(1),k=null),I&8&&m.value!==b[3].nome&&X(m,b[3].nome),L===(L=q(b))&&U?U.p(b,I):(U.d(1),U=L(b),U&&(U.c(),U.m(i,null)))},i:Te,o:Te,d(b){b&&_(e),k&&k.d(),U.d(),P=!1,Pe(w)}}}function ct(a,e,t){let l=[],o="",i=!0,r={nome:"",ordem:0},s=null,p={};ot(async()=>{await f(),t(2,i=!1)});async function f(){const{data:P,error:w}=await pe.from("categorias").select("*").order("ordem",{ascending:!0});w?t(1,o=w.message):t(0,l=P)}async function g(P){var L;P.preventDefault();const{data:w}=await pe.auth.getUser(),k=((L=w==null?void 0:w.user)==null?void 0:L.id)??null,{error:q}=await pe.from("categorias").insert({id_usuario:k,nome:r.nome,ordem:r.ordem});if(q){t(1,o=q.message);return}t(3,r={nome:"",ordem:0}),await f()}function h(P){t(4,s=P.id),t(5,p={...P})}function m(){t(4,s=null),t(5,p={})}async function E(P){P.preventDefault();const{error:w}=await pe.from("categorias").update({nome:p.nome,ordem:p.ordem}).eq("id",s);if(w){t(1,o=w.message);return}t(4,s=null),await f()}async function M(P){if(!confirm("Excluir esta categoria?"))return;const{error:w}=await pe.from("categorias").delete().eq("id",P);if(w){t(1,o=w.message);return}await f()}function C(){r.nome=this.value,t(3,r)}function N(){p.nome=this.value,t(5,p)}function j(){p.ordem=ve(this.value),t(5,p)}return[l,o,i,r,s,p,g,h,m,E,M,C,N,j,P=>h(P),P=>M(P.id)]}class dt extends Ae{constructor(e){super(),Me(this,e,ct,ut,Be,{})}}function Qe(a,e,t){const l=a.slice();return l[30]=e[t],l}function We(a,e,t){const l=a.slice();return l[33]=e[t],l}function Xe(a,e,t){const l=a.slice();return l[33]=e[t],l}function Ze(a){let e,t;return{c(){e=d("div"),t=$(a[2]),this.h()},l(l){e=c(l,"DIV",{class:!0});var o=v(e);t=x(o,a[2]),o.forEach(_),this.h()},h(){u(e,"class","mb-4 text-sm text-red-600")},m(l,o){Z(l,e,o),n(e,t)},p(l,o){o[0]&4&&ke(t,l[2])},d(l){l&&_(e)}}}function xe(a){let e,t=a[33].nome+"",l,o;return{c(){e=d("option"),l=$(t),this.h()},l(i){e=c(i,"OPTION",{});var r=v(e);l=x(r,t),r.forEach(_),this.h()},h(){e.__value=o=a[33].id,X(e,e.__value)},m(i,r){Z(i,e,r),n(e,l)},p(i,r){r[0]&2&&t!==(t=i[33].nome+"")&&ke(l,t),r[0]&2&&o!==(o=i[33].id)&&(e.__value=o,X(e,e.__value))},d(i){i&&_(e)}}}function $e(a){let e,t,l="Estoque atual",o,i,r,s;return{c(){e=d("div"),t=d("label"),t.textContent=l,o=V(),i=d("input"),this.h()},l(p){e=c(p,"DIV",{});var f=v(e);t=c(f,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),W(t)!=="svelte-1ho81cm"&&(t.textContent=l),o=D(f),i=c(f,"INPUT",{id:!0,type:!0,step:!0,min:!0,class:!0}),f.forEach(_),this.h()},h(){u(t,"for","comp-prod-estoque"),u(t,"class","block text-sm mb-1"),u(i,"id","comp-prod-estoque"),u(i,"type","number"),u(i,"step","1"),u(i,"min","0"),u(i,"class","input-form")},m(p,f){Z(p,e,f),n(e,t),n(e,o),n(e,i),X(i,a[4].estoque_atual),r||(s=K(i,"input",a[18]),r=!0)},p(p,f){f[0]&18&&ve(i.value)!==p[4].estoque_atual&&X(i,p[4].estoque_atual)},d(p){p&&_(e),r=!1,s()}}}function ft(a){let e,t=Ee(a[0]),l=[];for(let o=0;o<t.length;o+=1)l[o]=lt(Qe(a,t,o));return{c(){e=d("div");for(let o=0;o<l.length;o+=1)l[o].c();this.h()},l(o){e=c(o,"DIV",{class:!0});var i=v(e);for(let r=0;r<l.length;r+=1)l[r].l(i);i.forEach(_),this.h()},h(){u(e,"class","divide-y")},m(o,i){Z(o,e,i);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null)},p(o,i){if(i[0]&3939){t=Ee(o[0]);let r;for(r=0;r<t.length;r+=1){const s=Qe(o,t,r);l[r]?l[r].p(s,i):(l[r]=lt(s),l[r].c(),l[r].m(e,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=t.length}},d(o){o&&_(e),Oe(l,o)}}}function _t(a){let e,t="Carregando...";return{c(){e=d("div"),e.textContent=t},l(l){e=c(l,"DIV",{"data-svelte-h":!0}),W(e)!=="svelte-btlswi"&&(e.textContent=t)},m(l,o){Z(l,e,o)},p:Te,d(l){l&&_(e)}}}function pt(a){let e,t,l,o=a[30].nome+"",i,r,s,p,f=Number(a[30].preco).toFixed(2)+"",g,h,m,E,M="Editar",C,N,j="Excluir",T,F;function P(){return a[26](a[30])}function w(){return a[27](a[30])}return{c(){e=d("div"),t=d("div"),l=d("div"),i=$(o),r=V(),s=d("div"),p=$("R$ "),g=$(f),h=V(),m=d("div"),E=d("button"),E.textContent=M,C=V(),N=d("button"),N.textContent=j,this.h()},l(k){e=c(k,"DIV",{class:!0});var q=v(e);t=c(q,"DIV",{});var L=v(t);l=c(L,"DIV",{class:!0});var U=v(l);i=x(U,o),U.forEach(_),r=D(L),s=c(L,"DIV",{class:!0});var b=v(s);p=x(b,"R$ "),g=x(b,f),b.forEach(_),L.forEach(_),h=D(q),m=c(q,"DIV",{class:!0});var I=v(m);E=c(I,"BUTTON",{class:!0,"data-svelte-h":!0}),W(E)!=="svelte-1099xyy"&&(E.textContent=M),C=D(I),N=c(I,"BUTTON",{class:!0,"data-svelte-h":!0}),W(N)!=="svelte-r6e1ss"&&(N.textContent=j),I.forEach(_),q.forEach(_),this.h()},h(){u(l,"class","font-medium"),u(s,"class","text-sm text-slate-500"),u(E,"class","btn-secondary"),u(N,"class","btn-danger"),u(m,"class","flex gap-2"),u(e,"class","flex items-center justify-between")},m(k,q){Z(k,e,q),n(e,t),n(t,l),n(l,i),n(t,r),n(t,s),n(s,p),n(s,g),n(e,h),n(e,m),n(m,E),n(m,C),n(m,N),T||(F=[K(E,"click",P),K(N,"click",w)],T=!0)},p(k,q){a=k,q[0]&1&&o!==(o=a[30].nome+"")&&ke(i,o),q[0]&1&&f!==(f=Number(a[30].preco).toFixed(2)+"")&&ke(g,f)},d(k){k&&_(e),T=!1,Pe(F)}}}function mt(a){let e,t,l,o,i,r,s,p,f,g,h,m,E,M,C,N,j,T,F,P,w,k,q,L,U,b,I,H,te,G,re,oe,z,Y,ae,ne,se,fe,be,ce,de,me="Salvar",Le,ie,ye="Cancelar",Ne,le,ue=Ee(a[1]),B=[];for(let O=0;O<ue.length;O+=1)B[O]=et(We(a,ue,O));let R=a[6].controlar_estoque&&tt(a);return{c(){e=d("form"),t=d("div"),l=d("label"),o=$("Nome"),r=V(),s=d("input"),f=V(),g=d("div"),h=d("label"),m=$("Preço"),M=V(),C=d("input"),j=V(),T=d("div"),F=d("label"),P=$("Categoria"),k=V(),q=d("select");for(let O=0;O<B.length;O+=1)B[O].c();U=V(),b=d("div"),I=d("label"),H=d("input"),te=$(" Por unidade"),G=V(),re=d("label"),oe=d("input"),z=$(" Ocultar no PDV"),Y=V(),ae=d("label"),ne=d("input"),se=$(" Controlar estoque"),fe=V(),R&&R.c(),be=V(),ce=d("div"),de=d("button"),de.textContent=me,Le=V(),ie=d("button"),ie.textContent=ye,this.h()},l(O){e=c(O,"FORM",{class:!0});var A=v(e);t=c(A,"DIV",{});var S=v(t);l=c(S,"LABEL",{for:!0,class:!0});var y=v(l);o=x(y,"Nome"),y.forEach(_),r=D(S),s=c(S,"INPUT",{id:!0,class:!0}),S.forEach(_),f=D(A),g=c(A,"DIV",{});var Q=v(g);h=c(Q,"LABEL",{for:!0,class:!0});var J=v(h);m=x(J,"Preço"),J.forEach(_),M=D(Q),C=c(Q,"INPUT",{id:!0,type:!0,step:!0,min:!0,class:!0}),Q.forEach(_),j=D(A),T=c(A,"DIV",{});var ee=v(T);F=c(ee,"LABEL",{for:!0,class:!0});var Ce=v(F);P=x(Ce,"Categoria"),Ce.forEach(_),k=D(ee),q=c(ee,"SELECT",{id:!0,class:!0});var Ie=v(q);for(let Ve=0;Ve<B.length;Ve+=1)B[Ve].l(Ie);Ie.forEach(_),ee.forEach(_),U=D(A),b=c(A,"DIV",{class:!0});var _e=v(b);I=c(_e,"LABEL",{class:!0});var qe=v(I);H=c(qe,"INPUT",{type:!0}),te=x(qe," Por unidade"),qe.forEach(_),G=D(_e),re=c(_e,"LABEL",{class:!0});var he=v(re);oe=c(he,"INPUT",{type:!0}),z=x(he," Ocultar no PDV"),he.forEach(_),Y=D(_e),ae=c(_e,"LABEL",{class:!0});var De=v(ae);ne=c(De,"INPUT",{type:!0}),se=x(De," Controlar estoque"),De.forEach(_),_e.forEach(_),fe=D(A),R&&R.l(A),be=D(A),ce=c(A,"DIV",{class:!0});var ge=v(ce);de=c(ge,"BUTTON",{class:!0,"data-svelte-h":!0}),W(de)!=="svelte-k66zcr"&&(de.textContent=me),Le=D(ge),ie=c(ge,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),W(ie)!=="svelte-1h91p4y"&&(ie.textContent=ye),ge.forEach(_),A.forEach(_),this.h()},h(){u(l,"for",i=`comp-edit-prod-nome-${a[30].id}`),u(l,"class","block text-sm mb-1"),u(s,"id",p=`comp-edit-prod-nome-${a[30].id}`),u(s,"class","input-form"),s.required=!0,u(h,"for",E=`comp-edit-prod-preco-${a[30].id}`),u(h,"class","block text-sm mb-1"),u(C,"id",N=`comp-edit-prod-preco-${a[30].id}`),u(C,"type","number"),u(C,"step","0.01"),u(C,"min","0"),u(C,"class","input-form"),C.required=!0,u(F,"for",w=`comp-edit-prod-categoria-${a[30].id}`),u(F,"class","block text-sm mb-1"),u(q,"id",L=`comp-edit-prod-categoria-${a[30].id}`),u(q,"class","input-form"),q.required=!0,a[6].id_categoria===void 0&&rt(()=>a[21].call(q)),u(H,"type","checkbox"),u(I,"class","inline-flex items-center gap-2 text-sm"),u(oe,"type","checkbox"),u(re,"class","inline-flex items-center gap-2 text-sm"),u(ne,"type","checkbox"),u(ae,"class","inline-flex items-center gap-2 text-sm"),u(b,"class","flex items-center gap-3"),u(de,"class","btn-primary"),u(ie,"type","button"),u(ie,"class","btn-secondary"),u(ce,"class","md:col-span-2 flex gap-2"),u(e,"class","grid md:grid-cols-2 gap-4")},m(O,A){Z(O,e,A),n(e,t),n(t,l),n(l,o),n(t,r),n(t,s),X(s,a[6].nome),n(e,f),n(e,g),n(g,h),n(h,m),n(g,M),n(g,C),X(C,a[6].preco),n(e,j),n(e,T),n(T,F),n(F,P),n(T,k),n(T,q);for(let S=0;S<B.length;S+=1)B[S]&&B[S].m(q,null);we(q,a[6].id_categoria,!0),n(e,U),n(e,b),n(b,I),n(I,H),H.checked=a[6].eh_item_por_unidade,n(I,te),n(b,G),n(b,re),n(re,oe),oe.checked=a[6].ocultar_no_pdv,n(re,z),n(b,Y),n(b,ae),n(ae,ne),ne.checked=a[6].controlar_estoque,n(ae,se),n(e,fe),R&&R.m(e,null),n(e,be),n(e,ce),n(ce,de),n(ce,Le),n(ce,ie),Ne||(le=[K(s,"input",a[19]),K(C,"input",a[20]),K(q,"change",a[21]),K(H,"change",a[22]),K(oe,"change",a[23]),K(ne,"change",a[24]),K(ie,"click",a[9]),K(e,"submit",a[10])],Ne=!0)},p(O,A){if(A[0]&1&&i!==(i=`comp-edit-prod-nome-${O[30].id}`)&&u(l,"for",i),A[0]&1&&p!==(p=`comp-edit-prod-nome-${O[30].id}`)&&u(s,"id",p),A[0]&66&&s.value!==O[6].nome&&X(s,O[6].nome),A[0]&1&&E!==(E=`comp-edit-prod-preco-${O[30].id}`)&&u(h,"for",E),A[0]&1&&N!==(N=`comp-edit-prod-preco-${O[30].id}`)&&u(C,"id",N),A[0]&66&&ve(C.value)!==O[6].preco&&X(C,O[6].preco),A[0]&1&&w!==(w=`comp-edit-prod-categoria-${O[30].id}`)&&u(F,"for",w),A[0]&2){ue=Ee(O[1]);let S;for(S=0;S<ue.length;S+=1){const y=We(O,ue,S);B[S]?B[S].p(y,A):(B[S]=et(y),B[S].c(),B[S].m(q,null))}for(;S<B.length;S+=1)B[S].d(1);B.length=ue.length}A[0]&1&&L!==(L=`comp-edit-prod-categoria-${O[30].id}`)&&u(q,"id",L),A[0]&66&&we(q,O[6].id_categoria),A[0]&66&&(H.checked=O[6].eh_item_por_unidade),A[0]&66&&(oe.checked=O[6].ocultar_no_pdv),A[0]&66&&(ne.checked=O[6].controlar_estoque),O[6].controlar_estoque?R?R.p(O,A):(R=tt(O),R.c(),R.m(e,be)):R&&(R.d(1),R=null)},d(O){O&&_(e),Oe(B,O),R&&R.d(),Ne=!1,Pe(le)}}}function et(a){let e,t=a[33].nome+"",l,o;return{c(){e=d("option"),l=$(t),this.h()},l(i){e=c(i,"OPTION",{});var r=v(e);l=x(r,t),r.forEach(_),this.h()},h(){e.__value=o=a[33].id,X(e,e.__value)},m(i,r){Z(i,e,r),n(e,l)},p(i,r){r[0]&2&&t!==(t=i[33].nome+"")&&ke(l,t),r[0]&2&&o!==(o=i[33].id)&&(e.__value=o,X(e,e.__value))},d(i){i&&_(e)}}}function tt(a){let e,t,l,o,i,r,s,p,f;return{c(){e=d("div"),t=d("label"),l=$("Estoque atual"),i=V(),r=d("input"),this.h()},l(g){e=c(g,"DIV",{});var h=v(e);t=c(h,"LABEL",{for:!0,class:!0});var m=v(t);l=x(m,"Estoque atual"),m.forEach(_),i=D(h),r=c(h,"INPUT",{id:!0,type:!0,step:!0,min:!0,class:!0}),h.forEach(_),this.h()},h(){u(t,"for",o=`comp-edit-prod-estoque-${a[30].id}`),u(t,"class","block text-sm mb-1"),u(r,"id",s=`comp-edit-prod-estoque-${a[30].id}`),u(r,"type","number"),u(r,"step","1"),u(r,"min","0"),u(r,"class","input-form")},m(g,h){Z(g,e,h),n(e,t),n(t,l),n(e,i),n(e,r),X(r,a[6].estoque_atual),p||(f=K(r,"input",a[25]),p=!0)},p(g,h){h[0]&1&&o!==(o=`comp-edit-prod-estoque-${g[30].id}`)&&u(t,"for",o),h[0]&1&&s!==(s=`comp-edit-prod-estoque-${g[30].id}`)&&u(r,"id",s),h[0]&66&&ve(r.value)!==g[6].estoque_atual&&X(r,g[6].estoque_atual)},d(g){g&&_(e),p=!1,f()}}}function lt(a){let e,t;function l(r,s){return r[5]===r[30].id?mt:pt}let o=l(a),i=o(a);return{c(){e=d("div"),i.c(),t=V(),this.h()},l(r){e=c(r,"DIV",{class:!0});var s=v(e);i.l(s),t=D(s),s.forEach(_),this.h()},h(){u(e,"class","py-3")},m(r,s){Z(r,e,s),i.m(e,null),n(e,t)},p(r,s){o===(o=l(r))&&i?i.p(r,s):(i.d(1),i=o(r),i&&(i.c(),i.m(e,t)))},d(r){r&&_(e),i.d()}}}function ht(a){let e,t,l="Produtos",o,i,r,s,p,f,g="Nome",h,m,E,M,C,N="Preço",j,T,F,P,w,k="Categoria",q,L,U,b="Selecione...",I,H,te,G,re,oe,z,Y,ae,ne,se,fe,be,ce,de,me,Le='<button class="btn-primary">Salvar</button>',ie,ye,Ne,le=a[2]&&Ze(a),ue=Ee(a[1]),B=[];for(let y=0;y<ue.length;y+=1)B[y]=xe(Xe(a,ue,y));let R=a[4].controlar_estoque&&$e(a);function O(y,Q){return y[3]?_t:ft}let A=O(a),S=A(a);return{c(){e=d("section"),t=d("div"),t.textContent=l,o=V(),i=d("div"),le&&le.c(),r=V(),s=d("form"),p=d("div"),f=d("label"),f.textContent=g,h=V(),m=d("input"),E=V(),M=d("div"),C=d("label"),C.textContent=N,j=V(),T=d("input"),F=V(),P=d("div"),w=d("label"),w.textContent=k,q=V(),L=d("select"),U=d("option"),U.textContent=b;for(let y=0;y<B.length;y+=1)B[y].c();I=V(),H=d("div"),te=d("label"),G=d("input"),re=$(" Por unidade"),oe=V(),z=d("label"),Y=d("input"),ae=$(" Ocultar no PDV"),ne=V(),se=d("label"),fe=d("input"),be=$(" Controlar estoque"),ce=V(),R&&R.c(),de=V(),me=d("div"),me.innerHTML=Le,ie=V(),S.c(),this.h()},l(y){e=c(y,"SECTION",{class:!0});var Q=v(e);t=c(Q,"DIV",{class:!0,"data-svelte-h":!0}),W(t)!=="svelte-993osa"&&(t.textContent=l),o=D(Q),i=c(Q,"DIV",{class:!0});var J=v(i);le&&le.l(J),r=D(J),s=c(J,"FORM",{class:!0});var ee=v(s);p=c(ee,"DIV",{});var Ce=v(p);f=c(Ce,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),W(f)!=="svelte-1m6t2i5"&&(f.textContent=g),h=D(Ce),m=c(Ce,"INPUT",{id:!0,class:!0}),Ce.forEach(_),E=D(ee),M=c(ee,"DIV",{});var Ie=v(M);C=c(Ie,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),W(C)!=="svelte-1iaf7bl"&&(C.textContent=N),j=D(Ie),T=c(Ie,"INPUT",{id:!0,type:!0,step:!0,min:!0,class:!0}),Ie.forEach(_),F=D(ee),P=c(ee,"DIV",{});var _e=v(P);w=c(_e,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),W(w)!=="svelte-y47rf9"&&(w.textContent=k),q=D(_e),L=c(_e,"SELECT",{id:!0,class:!0});var qe=v(L);U=c(qe,"OPTION",{"data-svelte-h":!0}),W(U)!=="svelte-106ihl6"&&(U.textContent=b);for(let Ue=0;Ue<B.length;Ue+=1)B[Ue].l(qe);qe.forEach(_),_e.forEach(_),I=D(ee),H=c(ee,"DIV",{class:!0});var he=v(H);te=c(he,"LABEL",{class:!0});var De=v(te);G=c(De,"INPUT",{type:!0}),re=x(De," Por unidade"),De.forEach(_),oe=D(he),z=c(he,"LABEL",{class:!0});var ge=v(z);Y=c(ge,"INPUT",{type:!0}),ae=x(ge," Ocultar no PDV"),ge.forEach(_),ne=D(he),se=c(he,"LABEL",{class:!0});var Ve=v(se);fe=c(Ve,"INPUT",{type:!0}),be=x(Ve," Controlar estoque"),Ve.forEach(_),he.forEach(_),ce=D(ee),R&&R.l(ee),de=D(ee),me=c(ee,"DIV",{class:!0,"data-svelte-h":!0}),W(me)!=="svelte-sqvv1u"&&(me.innerHTML=Le),ee.forEach(_),ie=D(J),S.l(J),J.forEach(_),Q.forEach(_),this.h()},h(){u(t,"class","p-4 border-b font-semibold"),u(f,"for","comp-prod-nome"),u(f,"class","block text-sm mb-1"),u(m,"id","comp-prod-nome"),u(m,"class","input-form"),m.required=!0,u(C,"for","comp-prod-preco"),u(C,"class","block text-sm mb-1"),u(T,"id","comp-prod-preco"),u(T,"type","number"),u(T,"step","0.01"),u(T,"min","0"),u(T,"class","input-form"),T.required=!0,u(w,"for","comp-prod-categoria"),u(w,"class","block text-sm mb-1"),U.__value=null,X(U,U.__value),U.disabled=!0,u(L,"id","comp-prod-categoria"),u(L,"class","input-form"),L.required=!0,a[4].id_categoria===void 0&&rt(()=>a[14].call(L)),u(G,"type","checkbox"),u(te,"class","inline-flex items-center gap-2 text-sm"),u(Y,"type","checkbox"),u(z,"class","inline-flex items-center gap-2 text-sm"),u(fe,"type","checkbox"),u(se,"class","inline-flex items-center gap-2 text-sm"),u(H,"class","flex items-center gap-3"),u(me,"class","md:col-span-2"),u(s,"class","grid md:grid-cols-2 gap-4 mb-6"),u(i,"class","p-4"),u(e,"class","bg-white dark:bg-slate-800 rounded-lg shadow")},m(y,Q){Z(y,e,Q),n(e,t),n(e,o),n(e,i),le&&le.m(i,null),n(i,r),n(i,s),n(s,p),n(p,f),n(p,h),n(p,m),X(m,a[4].nome),n(s,E),n(s,M),n(M,C),n(M,j),n(M,T),X(T,a[4].preco),n(s,F),n(s,P),n(P,w),n(P,q),n(P,L),n(L,U);for(let J=0;J<B.length;J+=1)B[J]&&B[J].m(L,null);we(L,a[4].id_categoria,!0),n(s,I),n(s,H),n(H,te),n(te,G),G.checked=a[4].eh_item_por_unidade,n(te,re),n(H,oe),n(H,z),n(z,Y),Y.checked=a[4].ocultar_no_pdv,n(z,ae),n(H,ne),n(H,se),n(se,fe),fe.checked=a[4].controlar_estoque,n(se,be),n(s,ce),R&&R.m(s,null),n(s,de),n(s,me),n(i,ie),S.m(i,null),ye||(Ne=[K(m,"input",a[12]),K(T,"input",a[13]),K(L,"change",a[14]),K(G,"change",a[15]),K(Y,"change",a[16]),K(fe,"change",a[17]),K(s,"submit",a[7])],ye=!0)},p(y,Q){if(y[2]?le?le.p(y,Q):(le=Ze(y),le.c(),le.m(i,r)):le&&(le.d(1),le=null),Q[0]&18&&m.value!==y[4].nome&&X(m,y[4].nome),Q[0]&18&&ve(T.value)!==y[4].preco&&X(T,y[4].preco),Q[0]&2){ue=Ee(y[1]);let J;for(J=0;J<ue.length;J+=1){const ee=Xe(y,ue,J);B[J]?B[J].p(ee,Q):(B[J]=xe(ee),B[J].c(),B[J].m(L,null))}for(;J<B.length;J+=1)B[J].d(1);B.length=ue.length}Q[0]&18&&we(L,y[4].id_categoria),Q[0]&18&&(G.checked=y[4].eh_item_por_unidade),Q[0]&18&&(Y.checked=y[4].ocultar_no_pdv),Q[0]&18&&(fe.checked=y[4].controlar_estoque),y[4].controlar_estoque?R?R.p(y,Q):(R=$e(y),R.c(),R.m(s,de)):R&&(R.d(1),R=null),A===(A=O(y))&&S?S.p(y,Q):(S.d(1),S=A(y),S&&(S.c(),S.m(i,null)))},i:Te,o:Te,d(y){y&&_(e),le&&le.d(),Oe(B,y),R&&R.d(),S.d(),ye=!1,Pe(Ne)}}}function vt(a,e,t){let l=[],o=[],i="",r=!0,s={nome:"",preco:0,id_categoria:null,eh_item_por_unidade:!1,ocultar_no_pdv:!1,controlar_estoque:!1,estoque_atual:0},p=null,f={};ot(async()=>{await g(),await h(),t(3,r=!1)});async function g(){const{data:z,error:Y}=await pe.from("categorias").select("*").order("ordem",{ascending:!0});Y?t(2,i=Y.message):t(1,o=z)}async function h(){const{data:z,error:Y}=await pe.from("produtos").select("*").order("nome",{ascending:!0});Y?t(2,i=Y.message):t(0,l=z)}async function m(z){var se;z.preventDefault();const{data:Y}=await pe.auth.getUser(),ae=((se=Y==null?void 0:Y.user)==null?void 0:se.id)??null,{error:ne}=await pe.from("produtos").insert({id_usuario:ae,nome:s.nome,preco:s.preco,id_categoria:s.id_categoria,eh_item_por_unidade:s.eh_item_por_unidade,ocultar_no_pdv:s.ocultar_no_pdv,controlar_estoque:s.controlar_estoque,estoque_atual:s.controlar_estoque?s.estoque_atual:0});if(ne){t(2,i=ne.message);return}t(4,s={nome:"",preco:0,id_categoria:null,eh_item_por_unidade:!1,ocultar_no_pdv:!1,controlar_estoque:!1,estoque_atual:0}),await h()}function E(z){t(5,p=z.id),t(6,f={...z})}function M(){t(5,p=null),t(6,f={})}async function C(z){z.preventDefault();const{error:Y}=await pe.from("produtos").update({nome:f.nome,preco:f.preco,id_categoria:f.id_categoria,eh_item_por_unidade:f.eh_item_por_unidade,ocultar_no_pdv:f.ocultar_no_pdv,controlar_estoque:f.controlar_estoque,estoque_atual:f.controlar_estoque?f.estoque_atual:0}).eq("id",p);if(Y){t(2,i=Y.message);return}t(5,p=null),await h()}async function N(z){if(!confirm("Excluir este produto?"))return;const{error:Y}=await pe.from("produtos").delete().eq("id",z);if(Y){t(2,i=Y.message);return}await h()}function j(){s.nome=this.value,t(4,s),t(1,o)}function T(){s.preco=ve(this.value),t(4,s),t(1,o)}function F(){s.id_categoria=Se(this),t(4,s),t(1,o)}function P(){s.eh_item_por_unidade=this.checked,t(4,s),t(1,o)}function w(){s.ocultar_no_pdv=this.checked,t(4,s),t(1,o)}function k(){s.controlar_estoque=this.checked,t(4,s),t(1,o)}function q(){s.estoque_atual=ve(this.value),t(4,s),t(1,o)}function L(){f.nome=this.value,t(6,f),t(1,o)}function U(){f.preco=ve(this.value),t(6,f),t(1,o)}function b(){f.id_categoria=Se(this),t(6,f),t(1,o)}function I(){f.eh_item_por_unidade=this.checked,t(6,f),t(1,o)}function H(){f.ocultar_no_pdv=this.checked,t(6,f),t(1,o)}function te(){f.controlar_estoque=this.checked,t(6,f),t(1,o)}function G(){f.estoque_atual=ve(this.value),t(6,f),t(1,o)}return[l,o,i,r,s,p,f,m,E,M,C,N,j,T,F,P,w,k,q,L,U,b,I,H,te,G,z=>E(z),z=>N(z.id)]}class bt extends Ae{constructor(e){super(),Me(this,e,vt,ht,Be,{},null,[-1,-1])}}function gt(a){let e,t="Cadastros",l,o,i="Gerencie categorias e produtos em um só lugar.",r,s,p,f,g,h;return p=new dt({}),g=new bt({}),{c(){e=d("h1"),e.textContent=t,l=V(),o=d("p"),o.textContent=i,r=V(),s=d("div"),Ge(p.$$.fragment),f=V(),Ge(g.$$.fragment),this.h()},l(m){e=c(m,"H1",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-f6exvw"&&(e.textContent=t),l=D(m),o=c(m,"P",{class:!0,"data-svelte-h":!0}),W(o)!=="svelte-1672hw6"&&(o.textContent=i),r=D(m),s=c(m,"DIV",{class:!0});var E=v(s);ze(p.$$.fragment,E),f=D(E),ze(g.$$.fragment,E),E.forEach(_),this.h()},h(){u(e,"class","text-2xl font-semibold mb-4"),u(o,"class","text-slate-600 dark:text-slate-300 mb-6"),u(s,"class","grid lg:grid-cols-2 gap-6")},m(m,E){Z(m,e,E),Z(m,l,E),Z(m,o,E),Z(m,r,E),Z(m,s,E),je(p,s,null),n(s,f),je(g,s,null),h=!0},p:Te,i(m){h||(He(p.$$.fragment,m),He(g.$$.fragment,m),h=!0)},o(m){Re(p.$$.fragment,m),Re(g.$$.fragment,m),h=!1},d(m){m&&(_(e),_(l),_(o),_(r),_(s)),Fe(p),Fe(g)}}}class qt extends Ae{constructor(e){super(),Me(this,e,null,gt,Be,{})}}export{qt as component};
